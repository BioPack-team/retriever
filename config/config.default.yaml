# Default configuration values.
# Managed by Retriever.
# Don't edit this file, it will be overwritten.
# Edit the appropriate config file instead.
instance_env: dev  # Instance environment. Used in Sentry, userAgent of subqueries, instance-appropriate behavior, etc.
instance_idx: 0 # Instance index. Use when multiple Retriever instances are run, so a leader can be determined.
log_level: DEBUG # Level of application logs to print/keep.
host: 0.0.0.0 # Uvicorn listen host.
port: 8080 # Uvicorn listen port.
cors:
  allow_origins:  # Origins allowed to make cross-origin requests.
  - '*'
  allow_credentials: true # Support cookies in cross-origin requests.
  allow_methods: # Methods allowed in cross-origin requests.
  - '*'
  allow_headers: # Headers allowed in cross-origin requests.
  - '*'
workers: # Number of workers, defaults to n_cpus if unset.
allow_profiler: true # Allow all queries to enable profiling with a query parameter.
job:
  callback:
    retries: 3  # Number of times to retry the callback.
    timeout: 10 # Time in seconds before a callback attempt should time out.
  lookup:
    timeout: 10  # Time in seconds before a job should time out, set to -1 to disable.
  metakg:
    timeout: 10  # Time in seconds before a job should time out, set to -1 to disable.
    build_time: -1 # Time in seconds before MetaKG should be rebuilt. Set to -1 to only build at start.
  ttl: 2592000  # Time in seconds for job state to remain after it was last touched
  ttl_max: 31536000 # Time in seconds after which job state is cleared, regardless of last touch
log:
  log_to_mongo: true  # Persist logs in MongoDB.
  ttl: 1209600 # Time in seconds for a log to persist.
redis:
  host: localhost
  port: 6379
  password:
  ssl_enabled: false
  attempts: 3  # Number of attempts to accomplish operation before considering it failed.
  timeout: 5 # Time before a redis operation is considered failed.
  shutdown_timeout: 3 # Time in seconds to wait for batched tasks to finish before force-quitting.
mongo:
  host: localhost
  port: 27017
  username:
  password:
  authsource:
  attempts: 3  # Number of attempts to accomplish operation before considering it failed.
  shutdown_timeout: 3 # Time in seconds to wait for serialize task to finish.
  flood_batch_size: 1000 #  Batch size for basic mongo inserts.
tier0:
  neo4j:
    query_timeout: 1600  # Time in seconds before a neo4j query should time out.
    connect_retries: 25 # Number of retries before declaring a connection failure.
    host: ''
    bolt_port: 7687
    username: ''
    password: ''
    database_name: neo4j
tier1:
  elasticsearch:
    query_timeout: 1600  # Time in seconds before a Elasticsearch query should time out.
    connect_retries: 25 # Number of retries before declaring a connection failure.
    host: ''
    port: 9200
    database_name: elasticsearch
    index_name: rtx_kg2_edges_merged
telemetry:
  otel_enabled: false
  otel_host: jaeger-otel-collector.sri
  otel_port: 4318
  otel_trace_endpoint: /v1/traces
  sentry_enabled: false
  sentry_dsn:
  traces_sample_rate: 0.1  # Proportion of traces to send to Sentry.
  profiles_sample_rate: 1.0 # Proportion of sampled traces to profile.
